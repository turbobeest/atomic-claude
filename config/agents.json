{
  "_comment": "Agent registry with LLM preferences and capability requirements",
  "_version": "1.0.0",

  "agents": {
    "system-architect": {
      "description": "High-level system design and architecture decisions",
      "category": "architecture",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["llama3.1:70b", "qwen2:72b", "devstral:24b", "mixtral:8x7b"],
        "min_context": 32000,
        "required_capabilities": ["reasoning", "analysis"]
      },
      "used_in_phases": [1, 2, 4]
    },

    "requirements-engineer": {
      "description": "Synthesizes requirements using RFC 2119 + EARS syntax",
      "category": "requirements",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "llama3.1:70b", "codellama:34b", "qwen2:7b"],
        "min_context": 16000,
        "required_capabilities": ["reasoning", "code"]
      },
      "used_in_phases": [2]
    },

    "prd-writer": {
      "description": "Authors formal PRD using 15-section template",
      "category": "documentation",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["devstral:24b", "llama3.1:70b", "mixtral:8x7b"],
        "min_context": 32000,
        "required_capabilities": ["reasoning", "code", "analysis"]
      },
      "used_in_phases": [2]
    },

    "prd-validator": {
      "description": "Validates PRD completeness and consistency",
      "category": "validation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "llama3.1:8b", "qwen2:7b"],
        "min_context": 16000,
        "required_capabilities": ["reasoning"]
      },
      "used_in_phases": [2]
    },

    "task-decomposer": {
      "description": "Breaks PRD into actionable development tasks",
      "category": "planning",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["llama3.1:70b", "devstral:24b", "mixtral:8x7b"],
        "min_context": 32000,
        "required_capabilities": ["reasoning", "analysis"]
      },
      "used_in_phases": [3]
    },

    "dependency-mapper": {
      "description": "Identifies task dependencies and ordering",
      "category": "planning",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "llama3.1:8b", "qwen2:7b"],
        "min_context": 16000,
        "required_capabilities": ["reasoning"]
      },
      "used_in_phases": [3]
    },

    "spec-writer": {
      "description": "Generates OpenSpec task specifications",
      "category": "specification",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["devstral:24b", "llama3.1:70b", "codellama:34b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [4]
    },

    "tdd-structurer": {
      "description": "Structures TDD test cases from specifications",
      "category": "testing",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "codellama:13b"],
        "min_context": 8000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [4]
    },

    "test-writer-phd": {
      "description": "Writes failing tests (RED phase of TDD)",
      "category": "testing",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "codellama:13b"],
        "min_context": 8000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [5]
    },

    "code-implementer-phd": {
      "description": "Implements code to pass tests (GREEN phase)",
      "category": "implementation",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["devstral:24b", "codellama:34b", "llama3.1:70b", "llama3.1:8b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [5]
    },

    "code-refiner-phd": {
      "description": "Refactors code while keeping tests green",
      "category": "implementation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "llama3.1:8b"],
        "min_context": 16000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [5]
    },

    "deep-code-reviewer-phd": {
      "description": "Comprehensive code review with security focus",
      "category": "review",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["llama3.1:70b", "devstral:24b", "qwen2:72b"],
        "min_context": 32000,
        "required_capabilities": ["code", "reasoning", "analysis"]
      },
      "used_in_phases": [6]
    },

    "code-reviewer-phd": {
      "description": "Standard code review (REFACTOR phase)",
      "category": "review",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "llama3.1:70b", "codellama:34b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [5, 6]
    },

    "arch-compliance-phd": {
      "description": "Validates architectural compliance",
      "category": "architecture",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["llama3.1:70b", "qwen2:72b", "mixtral:8x7b"],
        "min_context": 32000,
        "required_capabilities": ["reasoning", "analysis"]
      },
      "used_in_phases": [6]
    },

    "security-auditor": {
      "description": "Deep security vulnerability analysis",
      "category": "security",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["llama3.1:70b", "qwen2:72b", "devstral:24b"],
        "min_context": 32000,
        "required_capabilities": ["reasoning", "analysis"]
      },
      "used_in_phases": [6, 8]
    },

    "security-scanner": {
      "description": "Quick security scan (VERIFY phase)",
      "category": "security",
      "model_preference": {
        "tier": "haiku",
        "fallback_chain": ["llama3.2:3b", "phi3:mini", "gemma2:9b", "mistral:7b"],
        "min_context": 8000,
        "required_capabilities": ["fast"]
      },
      "used_in_phases": [5]
    },

    "vulnerability-expert": {
      "description": "Identifies complex vulnerability patterns",
      "category": "security",
      "model_preference": {
        "tier": "opus",
        "fallback_chain": ["llama3.1:70b", "qwen2:72b", "devstral:24b"],
        "min_context": 32000,
        "required_capabilities": ["reasoning", "analysis"]
      },
      "used_in_phases": [6, 8]
    },

    "performance-engineer": {
      "description": "Performance optimization analysis",
      "category": "performance",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "llama3.1:70b", "codellama:34b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [6, 7]
    },

    "perf-analyzer-phd": {
      "description": "Deep performance analysis and profiling",
      "category": "performance",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["llama3.1:70b", "devstral:24b", "qwen2:7b"],
        "min_context": 16000,
        "required_capabilities": ["reasoning", "analysis"]
      },
      "used_in_phases": [7]
    },

    "integration-test-expert": {
      "description": "Designs and implements integration tests",
      "category": "testing",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "llama3.1:8b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [7]
    },

    "technical-writer": {
      "description": "Creates technical documentation",
      "category": "documentation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["llama3.1:70b", "devstral:24b", "llama3.1:8b"],
        "min_context": 16000,
        "required_capabilities": ["reasoning"]
      },
      "used_in_phases": [8]
    },

    "api-doc-specialist": {
      "description": "API documentation and OpenAPI specs",
      "category": "documentation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "qwen2:7b"],
        "min_context": 8000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [8]
    },

    "doc-reviewer-phd": {
      "description": "Reviews documentation quality",
      "category": "documentation",
      "model_preference": {
        "tier": "haiku",
        "fallback_chain": ["llama3.1:8b", "qwen2:7b", "gemma2:9b"],
        "min_context": 8000,
        "required_capabilities": ["fast"]
      },
      "used_in_phases": [8]
    },

    "clean-code-expert": {
      "description": "Clean code principles and refactoring",
      "category": "quality",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "qwen2:7b"],
        "min_context": 8000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [5, 6]
    },

    "code-quality-expert": {
      "description": "Code quality metrics and analysis",
      "category": "quality",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "llama3.1:70b", "codellama:34b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [6]
    },

    "design-pattern-expert": {
      "description": "Design pattern analysis and recommendations",
      "category": "architecture",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["llama3.1:70b", "devstral:24b", "mixtral:8x7b"],
        "min_context": 16000,
        "required_capabilities": ["reasoning", "code"]
      },
      "used_in_phases": [4, 6]
    },

    "refactoring-specialist": {
      "description": "Safe refactoring strategies",
      "category": "implementation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "qwen2:7b"],
        "min_context": 8000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [5, 6]
    },

    "optimization-specialist": {
      "description": "Code and algorithm optimization",
      "category": "performance",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "llama3.1:8b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [5, 7]
    },

    "backend-engineer": {
      "description": "Backend implementation specialist",
      "category": "implementation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "llama3.1:8b"],
        "min_context": 16000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [5]
    },

    "fullstack-developer": {
      "description": "Full-stack implementation",
      "category": "implementation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "codellama:34b", "qwen2:7b"],
        "min_context": 16000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [5]
    },

    "unit-test-specialist": {
      "description": "Unit test design and implementation",
      "category": "testing",
      "model_preference": {
        "tier": "haiku",
        "fallback_chain": ["codellama:13b", "deepseek-coder:6.7b", "mistral:7b"],
        "min_context": 8000,
        "required_capabilities": ["code"]
      },
      "used_in_phases": [5]
    },

    "senior-engineer": {
      "description": "General senior engineering tasks",
      "category": "implementation",
      "model_preference": {
        "tier": "sonnet",
        "fallback_chain": ["devstral:24b", "llama3.1:70b", "llama3.1:8b"],
        "min_context": 16000,
        "required_capabilities": ["code", "reasoning"]
      },
      "used_in_phases": [5, 6, 7]
    },

    "context-gardener": {
      "description": "Context compression and summarization",
      "category": "utility",
      "model_preference": {
        "tier": "haiku",
        "fallback_chain": ["llama3.2:3b", "phi3:mini", "gemma2:9b"],
        "min_context": 8000,
        "required_capabilities": ["fast"]
      },
      "used_in_phases": ["all"]
    },

    "validator": {
      "description": "Fast validation and checking",
      "category": "utility",
      "model_preference": {
        "tier": "haiku",
        "fallback_chain": ["llama3.2:3b", "phi3:mini", "mistral:7b"],
        "min_context": 4000,
        "required_capabilities": ["fast"]
      },
      "used_in_phases": ["all"]
    }
  },

  "categories": {
    "architecture": {
      "description": "System design and architectural decisions",
      "default_tier": "opus"
    },
    "requirements": {
      "description": "Requirements engineering and analysis",
      "default_tier": "sonnet"
    },
    "documentation": {
      "description": "Technical writing and documentation",
      "default_tier": "sonnet"
    },
    "planning": {
      "description": "Task planning and decomposition",
      "default_tier": "opus"
    },
    "specification": {
      "description": "Detailed technical specifications",
      "default_tier": "opus"
    },
    "implementation": {
      "description": "Code implementation",
      "default_tier": "sonnet"
    },
    "testing": {
      "description": "Test design and implementation",
      "default_tier": "sonnet"
    },
    "review": {
      "description": "Code and design review",
      "default_tier": "sonnet"
    },
    "security": {
      "description": "Security analysis and auditing",
      "default_tier": "opus"
    },
    "performance": {
      "description": "Performance analysis and optimization",
      "default_tier": "sonnet"
    },
    "quality": {
      "description": "Code quality and standards",
      "default_tier": "sonnet"
    },
    "utility": {
      "description": "Fast utility tasks",
      "default_tier": "haiku"
    }
  }
}
